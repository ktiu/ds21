<!DOCTYPE html>
<html lang="de" xml:lang="de">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Sitzung 11 Web scraping | Data Science für die Humangeographie: Ein pragmatischer Einstieg mit R</title>
  <meta name="description" content="Projektseminar" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Sitzung 11 Web scraping | Data Science für die Humangeographie: Ein pragmatischer Einstieg mit R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Projektseminar" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Sitzung 11 Web scraping | Data Science für die Humangeographie: Ein pragmatischer Einstieg mit R" />
  
  <meta name="twitter:description" content="Projektseminar" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="html-tabellen.html"/>
<link rel="next" href="text-straube-2021.html"/>
<script src="assets/header-attrs-2.6/header-attrs.js"></script>
<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link rel="icon" href="https://www.uni-frankfurt.de/favicon.ico" type="image/x-icon">
<script src="solutions.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Terminüberblick</a></li>
<li class="chapter" data-level="" data-path="online-ressourcen.html"><a href="online-ressourcen.html"><i class="fa fa-check"></i>Online-Ressourcen</a>
<ul>
<li class="chapter" data-level="" data-path="online-ressourcen.html"><a href="online-ressourcen.html#r-tutorials-und-ebooks"><i class="fa fa-check"></i>R Tutorials und eBooks</a></li>
<li class="chapter" data-level="" data-path="online-ressourcen.html"><a href="online-ressourcen.html#inspiration-für-visualisierungen"><i class="fa fa-check"></i>Inspiration für Visualisierungen</a></li>
<li class="chapter" data-level="" data-path="online-ressourcen.html"><a href="online-ressourcen.html#spezialthemen"><i class="fa fa-check"></i>Spezialthemen</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="vorbesprechung.html"><a href="vorbesprechung.html"><i class="fa fa-check"></i><b>1</b> Vorbesprechung</a>
<ul>
<li class="chapter" data-level="1.1" data-path="vorbesprechung.html"><a href="vorbesprechung.html#überblick"><i class="fa fa-check"></i><b>1.1</b> Überblick</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="vorbesprechung.html"><a href="vorbesprechung.html#seminar-im-curriculum"><i class="fa fa-check"></i><b>1.1.1</b> Seminar im Curriculum</a></li>
<li class="chapter" data-level="1.1.2" data-path="vorbesprechung.html"><a href="vorbesprechung.html#lernziele-für-das-wintersemester"><i class="fa fa-check"></i><b>1.1.2</b> Lernziele für das Wintersemester</a></li>
<li class="chapter" data-level="1.1.3" data-path="vorbesprechung.html"><a href="vorbesprechung.html#technische-anforderungen"><i class="fa fa-check"></i><b>1.1.3</b> Technische Anforderungen</a></li>
<li class="chapter" data-level="1.1.4" data-path="vorbesprechung.html"><a href="vorbesprechung.html#unterstützung-im-corona-semester"><i class="fa fa-check"></i><b>1.1.4</b> Unterstützung im Corona-Semester</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="vorbesprechung.html"><a href="vorbesprechung.html#seminarformat"><i class="fa fa-check"></i><b>1.2</b> Seminarformat</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="vorbesprechung.html"><a href="vorbesprechung.html#input-und-plenum"><i class="fa fa-check"></i><b>1.2.1</b> Input und Plenum</a></li>
<li class="chapter" data-level="1.2.2" data-path="vorbesprechung.html"><a href="vorbesprechung.html#think-pair-share"><i class="fa fa-check"></i><b>1.2.2</b> Think-pair-share</a></li>
<li class="chapter" data-level="1.2.3" data-path="vorbesprechung.html"><a href="vorbesprechung.html#follow-the-recipe"><i class="fa fa-check"></i><b>1.2.3</b> Follow the recipe</a></li>
<li class="chapter" data-level="1.2.4" data-path="vorbesprechung.html"><a href="vorbesprechung.html#hands-on-session"><i class="fa fa-check"></i><b>1.2.4</b> Hands-on session</a></li>
<li class="chapter" data-level="1.2.5" data-path="vorbesprechung.html"><a href="vorbesprechung.html#share-your-work"><i class="fa fa-check"></i><b>1.2.5</b> Share your work</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="vorbesprechung.html"><a href="vorbesprechung.html#leistungsnachweise"><i class="fa fa-check"></i><b>1.3</b> Leistungsnachweise</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="vorbesprechung.html"><a href="vorbesprechung.html#exposé-wise"><i class="fa fa-check"></i><b>1.3.1</b> Exposé (WiSe)</a></li>
<li class="chapter" data-level="1.3.2" data-path="vorbesprechung.html"><a href="vorbesprechung.html#projektbericht-sose"><i class="fa fa-check"></i><b>1.3.2</b> Projektbericht (SoSe)</a></li>
<li class="chapter" data-level="1.3.3" data-path="vorbesprechung.html"><a href="vorbesprechung.html#anwesenheit"><i class="fa fa-check"></i><b>1.3.3</b> Anwesenheit</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="vorbesprechung.html"><a href="vorbesprechung.html#lehrphilosophie"><i class="fa fa-check"></i><b>1.4</b> Lehrphilosophie</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="vorbesprechung.html"><a href="vorbesprechung.html#transparenz"><i class="fa fa-check"></i><b>1.4.1</b> Transparenz</a></li>
<li class="chapter" data-level="1.4.2" data-path="vorbesprechung.html"><a href="vorbesprechung.html#praktische-übungen"><i class="fa fa-check"></i><b>1.4.2</b> Praktische Übungen</a></li>
<li class="chapter" data-level="1.4.3" data-path="vorbesprechung.html"><a href="vorbesprechung.html#geschützte-räume"><i class="fa fa-check"></i><b>1.4.3</b> Geschützte Räume</a></li>
<li class="chapter" data-level="1.4.4" data-path="vorbesprechung.html"><a href="vorbesprechung.html#kritische-reflexion"><i class="fa fa-check"></i><b>1.4.4</b> Kritische Reflexion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="erste-schritte.html"><a href="erste-schritte.html"><i class="fa fa-check"></i><b>2</b> Erste Schritte</a>
<ul>
<li class="chapter" data-level="2.1" data-path="erste-schritte.html"><a href="erste-schritte.html#vorbereitung"><i class="fa fa-check"></i><b>2.1</b> Vorbereitung</a></li>
<li class="chapter" data-level="2.2" data-path="erste-schritte.html"><a href="erste-schritte.html#lernziele-für-diese-sitzung"><i class="fa fa-check"></i><b>2.2</b> Lernziele für diese Sitzung</a></li>
<li class="chapter" data-level="2.3" data-path="erste-schritte.html"><a href="erste-schritte.html#operatoren"><i class="fa fa-check"></i><b>2.3</b> Operatoren</a></li>
<li class="chapter" data-level="2.4" data-path="erste-schritte.html"><a href="erste-schritte.html#variablen"><i class="fa fa-check"></i><b>2.4</b> Variablen</a></li>
<li class="chapter" data-level="2.5" data-path="erste-schritte.html"><a href="erste-schritte.html#konstanten"><i class="fa fa-check"></i><b>2.5</b> Konstanten</a></li>
<li class="chapter" data-level="2.6" data-path="erste-schritte.html"><a href="erste-schritte.html#funktionen"><i class="fa fa-check"></i><b>2.6</b> Funktionen</a></li>
<li class="chapter" data-level="2.7" data-path="erste-schritte.html"><a href="erste-schritte.html#strings"><i class="fa fa-check"></i><b>2.7</b> Strings</a></li>
<li class="chapter" data-level="2.8" data-path="erste-schritte.html"><a href="erste-schritte.html#datentypen"><i class="fa fa-check"></i><b>2.8</b> Datentypen</a></li>
<li class="chapter" data-level="2.9" data-path="erste-schritte.html"><a href="erste-schritte.html#aufgaben"><i class="fa fa-check"></i><b>2.9</b> Aufgaben</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="erste-schritte.html"><a href="erste-schritte.html#rechnen"><i class="fa fa-check"></i><b>2.9.1</b> Rechnen</a></li>
<li class="chapter" data-level="2.9.2" data-path="erste-schritte.html"><a href="erste-schritte.html#variablen-1"><i class="fa fa-check"></i><b>2.9.2</b> Variablen</a></li>
<li class="chapter" data-level="2.9.3" data-path="erste-schritte.html"><a href="erste-schritte.html#datentypen-1"><i class="fa fa-check"></i><b>2.9.3</b> Datentypen</a></li>
<li class="chapter" data-level="2.9.4" data-path="erste-schritte.html"><a href="erste-schritte.html#swirl"><i class="fa fa-check"></i><b>2.9.4</b> Swirl</a></li>
<li class="chapter" data-level="2.9.5" data-path="erste-schritte.html"><a href="erste-schritte.html#recherche"><i class="fa fa-check"></i><b>2.9.5</b> Recherche</a></li>
<li class="chapter" data-level="2.9.6" data-path="erste-schritte.html"><a href="erste-schritte.html#kniffliges"><i class="fa fa-check"></i><b>2.9.6</b> Kniffliges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="text-anderson-2008.html"><a href="text-anderson-2008.html"><i class="fa fa-check"></i><b>3</b> Text: Anderson 2008</a>
<ul>
<li class="chapter" data-level="3.1" data-path="text-anderson-2008.html"><a href="text-anderson-2008.html#lesetext"><i class="fa fa-check"></i><b>3.1</b> Lesetext</a></li>
<li class="chapter" data-level="3.2" data-path="text-anderson-2008.html"><a href="text-anderson-2008.html#fragen-an-den-text"><i class="fa fa-check"></i><b>3.2</b> Fragen an den Text</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datenstrukturen.html"><a href="datenstrukturen.html"><i class="fa fa-check"></i><b>4</b> Datenstrukturen</a>
<ul>
<li class="chapter" data-level="4.1" data-path="datenstrukturen.html"><a href="datenstrukturen.html#lernziele-dieser-sitzung"><i class="fa fa-check"></i><b>4.1</b> Lernziele dieser Sitzung</a></li>
<li class="chapter" data-level="4.2" data-path="datenstrukturen.html"><a href="datenstrukturen.html#vektoren"><i class="fa fa-check"></i><b>4.2</b> Vektoren</a></li>
<li class="chapter" data-level="4.3" data-path="datenstrukturen.html"><a href="datenstrukturen.html#matritzen"><i class="fa fa-check"></i><b>4.3</b> Matritzen</a></li>
<li class="chapter" data-level="4.4" data-path="datenstrukturen.html"><a href="datenstrukturen.html#listen"><i class="fa fa-check"></i><b>4.4</b> Listen</a></li>
<li class="chapter" data-level="4.5" data-path="datenstrukturen.html"><a href="datenstrukturen.html#data-frames"><i class="fa fa-check"></i><b>4.5</b> Data Frames</a></li>
<li class="chapter" data-level="4.6" data-path="datenstrukturen.html"><a href="datenstrukturen.html#tibbles"><i class="fa fa-check"></i><b>4.6</b> Tibbles</a></li>
<li class="chapter" data-level="4.7" data-path="datenstrukturen.html"><a href="datenstrukturen.html#aufgaben-1"><i class="fa fa-check"></i><b>4.7</b> Aufgaben</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="datenstrukturen.html"><a href="datenstrukturen.html#vektoren-1"><i class="fa fa-check"></i><b>4.7.1</b> Vektoren</a></li>
<li class="chapter" data-level="4.7.2" data-path="datenstrukturen.html"><a href="datenstrukturen.html#tibbles-1"><i class="fa fa-check"></i><b>4.7.2</b> Tibbles</a></li>
<li class="chapter" data-level="4.7.3" data-path="datenstrukturen.html"><a href="datenstrukturen.html#statistik"><i class="fa fa-check"></i><b>4.7.3</b> Statistik</a></li>
<li class="chapter" data-level="4.7.4" data-path="datenstrukturen.html"><a href="datenstrukturen.html#swirl-1"><i class="fa fa-check"></i><b>4.7.4</b> Swirl</a></li>
<li class="chapter" data-level="4.7.5" data-path="datenstrukturen.html"><a href="datenstrukturen.html#recherche-1"><i class="fa fa-check"></i><b>4.7.5</b> Recherche</a></li>
<li class="chapter" data-level="4.7.6" data-path="datenstrukturen.html"><a href="datenstrukturen.html#kniffliges-1"><i class="fa fa-check"></i><b>4.7.6</b> Kniffliges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualisierungen.html"><a href="visualisierungen.html"><i class="fa fa-check"></i><b>5</b> Visualisierungen</a>
<ul>
<li class="chapter" data-level="5.1" data-path="visualisierungen.html"><a href="visualisierungen.html#lernziele-dieser-sitzung-1"><i class="fa fa-check"></i><b>5.1</b> Lernziele dieser Sitzung</a></li>
<li class="chapter" data-level="5.2" data-path="visualisierungen.html"><a href="visualisierungen.html#voraussetzungen"><i class="fa fa-check"></i><b>5.2</b> Voraussetzungen</a></li>
<li class="chapter" data-level="5.3" data-path="visualisierungen.html"><a href="visualisierungen.html#überblick-1"><i class="fa fa-check"></i><b>5.3</b> Überblick</a></li>
<li class="chapter" data-level="5.4" data-path="visualisierungen.html"><a href="visualisierungen.html#visualisierung-mit-dem-standardpaket"><i class="fa fa-check"></i><b>5.4</b> Visualisierung mit dem Standardpaket</a></li>
<li class="chapter" data-level="5.5" data-path="visualisierungen.html"><a href="visualisierungen.html#visualisierung-mit-ggplot"><i class="fa fa-check"></i><b>5.5</b> Visualisierung mit <code>ggplot()</code></a></li>
<li class="chapter" data-level="5.6" data-path="visualisierungen.html"><a href="visualisierungen.html#aufgaben-2"><i class="fa fa-check"></i><b>5.6</b> Aufgaben</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="visualisierungen.html"><a href="visualisierungen.html#r-for-data-science"><i class="fa fa-check"></i><b>5.6.1</b> R for Data Science</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="text-shelton-et-al-2014.html"><a href="text-shelton-et-al-2014.html"><i class="fa fa-check"></i><b>6</b> Text: Shelton et al. 2014</a>
<ul>
<li class="chapter" data-level="6.1" data-path="text-shelton-et-al-2014.html"><a href="text-shelton-et-al-2014.html#lesetext-1"><i class="fa fa-check"></i><b>6.1</b> Lesetext</a></li>
<li class="chapter" data-level="6.2" data-path="text-shelton-et-al-2014.html"><a href="text-shelton-et-al-2014.html#fragen-an-den-text-1"><i class="fa fa-check"></i><b>6.2</b> Fragen an den Text</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="geodaten.html"><a href="geodaten.html"><i class="fa fa-check"></i><b>7</b> Geodaten</a>
<ul>
<li class="chapter" data-level="7.1" data-path="geodaten.html"><a href="geodaten.html#lernziele-dieser-sitzung-2"><i class="fa fa-check"></i><b>7.1</b> Lernziele dieser Sitzung</a></li>
<li class="chapter" data-level="7.2" data-path="geodaten.html"><a href="geodaten.html#voraussetzungen-1"><i class="fa fa-check"></i><b>7.2</b> Voraussetzungen</a></li>
<li class="chapter" data-level="7.3" data-path="geodaten.html"><a href="geodaten.html#exkurs-pipes"><i class="fa fa-check"></i><b>7.3</b> Exkurs: Pipes</a></li>
<li class="chapter" data-level="7.4" data-path="geodaten.html"><a href="geodaten.html#daten-importieren"><i class="fa fa-check"></i><b>7.4</b> Daten importieren</a></li>
<li class="chapter" data-level="7.5" data-path="geodaten.html"><a href="geodaten.html#überblick-verschaffen"><i class="fa fa-check"></i><b>7.5</b> Überblick verschaffen</a></li>
<li class="chapter" data-level="7.6" data-path="geodaten.html"><a href="geodaten.html#visualisieren"><i class="fa fa-check"></i><b>7.6</b> Visualisieren</a></li>
<li class="chapter" data-level="7.7" data-path="geodaten.html"><a href="geodaten.html#aufgaben-3"><i class="fa fa-check"></i><b>7.7</b> Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="choroplethen.html"><a href="choroplethen.html"><i class="fa fa-check"></i><b>8</b> Choroplethen</a>
<ul>
<li class="chapter" data-level="8.1" data-path="choroplethen.html"><a href="choroplethen.html#lernziele"><i class="fa fa-check"></i><b>8.1</b> Lernziele</a></li>
<li class="chapter" data-level="8.2" data-path="choroplethen.html"><a href="choroplethen.html#vorbereitung-1"><i class="fa fa-check"></i><b>8.2</b> Vorbereitung</a></li>
<li class="chapter" data-level="8.3" data-path="choroplethen.html"><a href="choroplethen.html#ziel"><i class="fa fa-check"></i><b>8.3</b> Ziel</a></li>
<li class="chapter" data-level="8.4" data-path="choroplethen.html"><a href="choroplethen.html#grundkarte"><i class="fa fa-check"></i><b>8.4</b> Grundkarte</a></li>
<li class="chapter" data-level="8.5" data-path="choroplethen.html"><a href="choroplethen.html#osm-daten"><i class="fa fa-check"></i><b>8.5</b> OSM-Daten</a></li>
<li class="chapter" data-level="8.6" data-path="choroplethen.html"><a href="choroplethen.html#koordinatenreferenzsysteme"><i class="fa fa-check"></i><b>8.6</b> Koordinatenreferenzsysteme</a></li>
<li class="chapter" data-level="8.7" data-path="choroplethen.html"><a href="choroplethen.html#verschneiden"><i class="fa fa-check"></i><b>8.7</b> Verschneiden</a></li>
<li class="chapter" data-level="8.8" data-path="choroplethen.html"><a href="choroplethen.html#aufgaben-4"><i class="fa fa-check"></i><b>8.8</b> Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="text-chandra-2014.html"><a href="text-chandra-2014.html"><i class="fa fa-check"></i><b>9</b> Text: Chandra 2014</a>
<ul>
<li class="chapter" data-level="9.1" data-path="text-chandra-2014.html"><a href="text-chandra-2014.html#lesetext-2"><i class="fa fa-check"></i><b>9.1</b> Lesetext</a></li>
<li class="chapter" data-level="9.2" data-path="text-chandra-2014.html"><a href="text-chandra-2014.html#fragen-an-den-text-2"><i class="fa fa-check"></i><b>9.2</b> Fragen an den Text</a></li>
<li class="chapter" data-level="9.3" data-path="text-chandra-2014.html"><a href="text-chandra-2014.html#themenfindung"><i class="fa fa-check"></i><b>9.3</b> Themenfindung</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="html-tabellen.html"><a href="html-tabellen.html"><i class="fa fa-check"></i><b>10</b> HTML-Tabellen</a>
<ul>
<li class="chapter" data-level="10.1" data-path="html-tabellen.html"><a href="html-tabellen.html#lernziele-dieser-sitzung-3"><i class="fa fa-check"></i><b>10.1</b> Lernziele dieser Sitzung</a></li>
<li class="chapter" data-level="10.2" data-path="html-tabellen.html"><a href="html-tabellen.html#vorbereitung-2"><i class="fa fa-check"></i><b>10.2</b> Vorbereitung</a></li>
<li class="chapter" data-level="10.3" data-path="html-tabellen.html"><a href="html-tabellen.html#datenbeschaffung"><i class="fa fa-check"></i><b>10.3</b> Datenbeschaffung</a></li>
<li class="chapter" data-level="10.4" data-path="html-tabellen.html"><a href="html-tabellen.html#datenformatierung"><i class="fa fa-check"></i><b>10.4</b> Datenformatierung</a></li>
<li class="chapter" data-level="10.5" data-path="html-tabellen.html"><a href="html-tabellen.html#datenaufbereitung"><i class="fa fa-check"></i><b>10.5</b> Datenaufbereitung</a></li>
<li class="chapter" data-level="10.6" data-path="html-tabellen.html"><a href="html-tabellen.html#datenvisualisierung"><i class="fa fa-check"></i><b>10.6</b> Datenvisualisierung</a></li>
<li class="chapter" data-level="10.7" data-path="html-tabellen.html"><a href="html-tabellen.html#aufgaben-5"><i class="fa fa-check"></i><b>10.7</b> Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="web-scraping.html"><a href="web-scraping.html"><i class="fa fa-check"></i><b>11</b> Web scraping</a>
<ul>
<li class="chapter" data-level="11.1" data-path="web-scraping.html"><a href="web-scraping.html#lernziele-dieser-sitzung-4"><i class="fa fa-check"></i><b>11.1</b> Lernziele dieser Sitzung</a></li>
<li class="chapter" data-level="11.2" data-path="web-scraping.html"><a href="web-scraping.html#vorbereitung-3"><i class="fa fa-check"></i><b>11.2</b> Vorbereitung</a></li>
<li class="chapter" data-level="11.3" data-path="web-scraping.html"><a href="web-scraping.html#exkurs-html"><i class="fa fa-check"></i><b>11.3</b> Exkurs: HTML</a></li>
<li class="chapter" data-level="11.4" data-path="web-scraping.html"><a href="web-scraping.html#seite-laden"><i class="fa fa-check"></i><b>11.4</b> Seite laden</a></li>
<li class="chapter" data-level="11.5" data-path="web-scraping.html"><a href="web-scraping.html#elemente-suchen"><i class="fa fa-check"></i><b>11.5</b> Elemente suchen</a></li>
<li class="chapter" data-level="11.6" data-path="web-scraping.html"><a href="web-scraping.html#elemente-reinigen"><i class="fa fa-check"></i><b>11.6</b> Elemente reinigen</a></li>
<li class="chapter" data-level="11.7" data-path="web-scraping.html"><a href="web-scraping.html#aufgaben-6"><i class="fa fa-check"></i><b>11.7</b> Aufgaben</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="text-straube-2021.html"><a href="text-straube-2021.html"><i class="fa fa-check"></i><b>12</b> Text: Straube 2021</a>
<ul>
<li class="chapter" data-level="12.1" data-path="text-straube-2021.html"><a href="text-straube-2021.html#lesetexte"><i class="fa fa-check"></i><b>12.1</b> Lesetexte</a></li>
<li class="chapter" data-level="12.2" data-path="text-straube-2021.html"><a href="text-straube-2021.html#fragen-an-den-text-3"><i class="fa fa-check"></i><b>12.2</b> Fragen an den Text</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science für die Humangeographie: Ein pragmatischer Einstieg mit R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="web-scraping" class="section level1" number="11">
<h1><span class="header-section-number">Sitzung 11</span> Web scraping</h1>
<div id="lernziele-dieser-sitzung-4" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Lernziele dieser Sitzung</h2>
<p>Sie können…</p>
<ul>
<li>HTML in seiner Grundstruktur interpretieren.</li>
<li>gezielt einzelne Elemente einer Seite mit R auslesen.</li>
</ul>
</div>
<div id="vorbereitung-3" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Vorbereitung</h2>
<p>Für diese Lektion werden folgende Pakete benötigt:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="web-scraping.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb121-2"><a href="web-scraping.html#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
</div>
<div id="exkurs-html" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Exkurs: HTML</h2>
<p>Wenn man eine Webseite ganz normal in einem Browser aufruft, erscheint sie als eine Mischung aus formatiertem Text, Bildern, Designelementen, ggf. Videos, usw. Was aber im Hintergrund eigentlich vom Server an den Browser übertragen wird, ist eine Textdatei in einem bestimmten Format – HTML (Hyptertext Markup Language). Darin wird Text auf eine genau festgelegte Art und Weise annotiert, damit der Browser weiß, wie er ihn anzeigen soll. Im HTML-Dokument kann auch stehen: Lade ein Bild von einer bestimmten Stelle und zeig es an dieser Stelle an.</p>
<p>Einen brauchbaren Überblick über die HTML-Elemente und die Struktur einer HTML-Datei gibt es hier: <a href="https://www.tutorialspoint.com/de/html/" class="uri">https://www.tutorialspoint.com/de/html/</a></p>
<p>An dieser Stelle ist wichtig ist zu wissen: HTML-Elemente (<q>Tags</q> oder <q>Nodes</q>) sind streng hierarchisch angeordnet. Sie bestehen oft aus einem Anfangs- und einem End-Tag in spitzen Klammern:</p>
<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Titel meiner Webseite&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Überschrift&lt;/h1&gt;
    &lt;p&gt;Erster Absatz mit &lt;b&gt;fettem Text&lt;/b&gt;&lt;/p&gt;
    &lt;p&gt;Zweiter Absatz mit &lt;i&gt;kursivem Text&lt;/i&gt;&lt;/p&gt;
    &lt;img src=&quot;path/to/image.jpg alt=&quot;Ein Bild&quot; /&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>In diesem Beispiel ist das Bild mit <code>&lt;img /&gt;</code> das einzige Element, das nicht geöffnet und wieder geschlossen wird. Außerdem hat dieses Element Attribute (<code>src</code> und <code>alt</code>) mit bestimmten Werten. Eine echte Webseite ist weitaus komplexer und unübersichtlicher.</p>
<p>Dem Browser kann man sagen: Zeig mir nicht wie üblich die „gerenderte“ Seite an, sondern die zu Grunde liegende HTML-Datei. Das geht mit „Quelltext anzeigen“ / „View Source“ o.ä.</p>
<p>Viele Browser (hier seien Chrome und Firefox empfohlen) haben auch einen Modus namens „Entwicklertools“ / „Developer tools“, in dem die HTML-Elemente hierarchisch geordnet sind.</p>
</div>
<div id="seite-laden" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> Seite laden</h2>
<p>Beim so genannten Web Scraping ist die Grundidee, dass wir eine Webseite nicht im Browser öffnen, sondern den HTML-Quelltext direkt in R laden. R kann dann aus dem Quelltext bestimmte Elemente extrahieren.</p>
<p>In der letzten Sitzung haben wir schon gesehen, wie Tabellen nach genau diesem Prinzip von einer Webseite direkt in R geladen werden können. Jetzt soll es darum gehen, noch präziser zu sagen, welche Elemente wir von einer bestimmten Webseite ziehen wollen.</p>
<p>Als Beispiel soll die Infoseite eines Wohnheims des Studentenwerks Frankfurt dienen. Die Adresse ist: <a href="https://www.studentenwerkfrankfurt.de/wohnen/wohnheime/frankfurt-am-main/kleine-seestrasse-11" class="uri">https://www.studentenwerkfrankfurt.de/wohnen/wohnheime/frankfurt-am-main/kleine-seestrasse-11</a></p>
<p>Zunächst laden wir den Quelltext in R und nennen ihn <code>quelltext</code>:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="web-scraping.html#cb123-1" aria-hidden="true" tabindex="-1"></a>quelltext <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;https://www.studentenwerkfrankfurt.de/wohnen/wohnheime/frankfurt-am-main/kleine-seestrasse-11&quot;</span>)</span>
<span id="cb123-2"><a href="web-scraping.html#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="web-scraping.html#cb123-3" aria-hidden="true" tabindex="-1"></a>quelltext</span>
<span id="cb123-4"><a href="web-scraping.html#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {html_document}</span></span>
<span id="cb123-5"><a href="web-scraping.html#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;html lang=&quot;de&quot; dir=&quot;ltr&quot; class=&quot;no-js&quot;&gt;</span></span>
<span id="cb123-6"><a href="web-scraping.html#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content= ...</span></span>
<span id="cb123-7"><a href="web-scraping.html#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;body id=&quot;p187&quot; class=&quot;page-187 pagelevel-4 lang ...</span></span></code></pre></div>
<p>In diesem Schritt hat R den HTML-Quelltext schon <q>geparsed</q>, d.h. ihn nicht nur als Text gespeichert, sondern als hierarchische Konstruktion mit den beiden Grundelementen <code>head</code> und <code>html</code>.</p>
</div>
<div id="elemente-suchen" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> Elemente suchen</h2>
<p>Uns soll jetzt das Baujahr interessieren. Auf der Seite stehen die Informationen rechts neben dem Bild. Mit den Entwicklertools können wir schauen, wie die Elemente in HTML genau heißen. Ein geeigneter Ausgangspunkt wäre das <code>&lt;div&gt;</code>-Element mit dem Attribut <code>id="c599"</code>.</p>
<p>In R können wir dieses einzelne Element ansprechen mit:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="web-scraping.html#cb124-1" aria-hidden="true" tabindex="-1"></a>quelltext <span class="sc">%&gt;%</span></span>
<span id="cb124-2"><a href="web-scraping.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div#c599&quot;</span>)</span>
<span id="cb124-3"><a href="web-scraping.html#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {html_node}</span></span>
<span id="cb124-4"><a href="web-scraping.html#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;div id=&quot;c599&quot; class=&quot;frame frame-default frame-type-text frame-layout-0 frame-background-none frame-no-backgroundimage frame-space-before-none frame-space-after-none&quot;&gt;</span></span>
<span id="cb124-5"><a href="web-scraping.html#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;div class=&quot;frame-container&quot;&gt;&lt;div class=&quot;frame-i ...</span></span></code></pre></div>
<p>Dann gehen wir in der Hierarchie drei <code>&lt;div&gt;</code>- Elemente „tiefer“. (<code>&lt;div&gt;</code>- Elemente sind abstrakte Container und werden im Webdesign oft angewendet.)</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="web-scraping.html#cb125-1" aria-hidden="true" tabindex="-1"></a>quelltext <span class="sc">%&gt;%</span></span>
<span id="cb125-2"><a href="web-scraping.html#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div#c599&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb125-3"><a href="web-scraping.html#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb125-4"><a href="web-scraping.html#cb125-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div&quot;</span>)</span>
<span id="cb125-5"><a href="web-scraping.html#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="do">## {html_node}</span></span>
<span id="cb125-6"><a href="web-scraping.html#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;div class=&quot;frame-inner&quot;&gt;</span></span>
<span id="cb125-7"><a href="web-scraping.html#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;p&gt;Kleine Seestraße 11&lt;br&gt;60486 Frankfurt am Mai ...</span></span>
<span id="cb125-8"><a href="web-scraping.html#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;p&gt;25 Wohnheimplätze&lt;/p&gt;\n</span></span>
<span id="cb125-9"><a href="web-scraping.html#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;ul class=&quot;list-normal&quot;&gt;\n&lt;li&gt;5 Wohnküchen&lt;/li&gt;\ ...</span></span>
<span id="cb125-10"><a href="web-scraping.html#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;p&gt;Baujahr&lt;strong&gt; &lt;/strong&gt;1995\r&lt;/p&gt;\n</span></span>
<span id="cb125-11"><a href="web-scraping.html#cb125-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;p&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;</span></span></code></pre></div>
<p>Alternativ könnten wir auch sagen: Darin das <code>div</code> mit <code>class="frame-inner"</code>:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="web-scraping.html#cb126-1" aria-hidden="true" tabindex="-1"></a>quelltext <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="web-scraping.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div#c599&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb126-3"><a href="web-scraping.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div.frame-inner&quot;</span>)</span>
<span id="cb126-4"><a href="web-scraping.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {html_node}</span></span>
<span id="cb126-5"><a href="web-scraping.html#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;div class=&quot;frame-inner&quot;&gt;</span></span>
<span id="cb126-6"><a href="web-scraping.html#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;p&gt;Kleine Seestraße 11&lt;br&gt;60486 Frankfurt am Mai ...</span></span>
<span id="cb126-7"><a href="web-scraping.html#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;p&gt;25 Wohnheimplätze&lt;/p&gt;\n</span></span>
<span id="cb126-8"><a href="web-scraping.html#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;ul class=&quot;list-normal&quot;&gt;\n&lt;li&gt;5 Wohnküchen&lt;/li&gt;\ ...</span></span>
<span id="cb126-9"><a href="web-scraping.html#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;p&gt;Baujahr&lt;strong&gt; &lt;/strong&gt;1995\r&lt;/p&gt;\n</span></span>
<span id="cb126-10"><a href="web-scraping.html#cb126-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;p&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/p&gt;</span></span></code></pre></div>
<p>mit <code>html_nodes()</code> (Mehrzahl) werden alle Unterelemente eines Typs (hier <code>&lt;p&gt;</code> = Paragraph) angesprochen. Davon dann den Textinhalt (<code>html_text()</code>) gibt uns die relevanten Informationen:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="web-scraping.html#cb127-1" aria-hidden="true" tabindex="-1"></a>quelltext <span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="web-scraping.html#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div#c599&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb127-3"><a href="web-scraping.html#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div.frame-inner&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb127-4"><a href="web-scraping.html#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;p&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb127-5"><a href="web-scraping.html#cb127-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb127-6"><a href="web-scraping.html#cb127-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Kleine Seestraße 1160486 Frankfurt am Main\r&quot;</span></span>
<span id="cb127-7"><a href="web-scraping.html#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &quot;25 Wohnheimplätze&quot;                           </span></span>
<span id="cb127-8"><a href="web-scraping.html#cb127-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &quot;Baujahr 1995\r&quot;                              </span></span>
<span id="cb127-9"><a href="web-scraping.html#cb127-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &quot;&quot;</span></span></code></pre></div>
</div>
<div id="elemente-reinigen" class="section level2" number="11.6">
<h2><span class="header-section-number">11.6</span> Elemente reinigen</h2>
<p>Jetzt ließe sich der dritte Eintrag dieses Ergebnisvectors reinigen und als Ergebnis <q>speichern</q>.</p>
<p>Der Befehl <code>str_extract()</code> wendet dabei einen Regulären Ausdruck an, der nach einer Folge von vier Zahlen sucht.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="web-scraping.html#cb128-1" aria-hidden="true" tabindex="-1"></a>quelltext <span class="sc">%&gt;%</span></span>
<span id="cb128-2"><a href="web-scraping.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div#c599&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-3"><a href="web-scraping.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div.frame-inner&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-4"><a href="web-scraping.html#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;p&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-5"><a href="web-scraping.html#cb128-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb128-6"><a href="web-scraping.html#cb128-6" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">3</span>] <span class="sc">%&gt;%</span></span>
<span id="cb128-7"><a href="web-scraping.html#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]{4}&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-8"><a href="web-scraping.html#cb128-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>() <span class="ot">-&gt;</span> baujahr</span>
<span id="cb128-9"><a href="web-scraping.html#cb128-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-10"><a href="web-scraping.html#cb128-10" aria-hidden="true" tabindex="-1"></a>baujahr</span>
<span id="cb128-11"><a href="web-scraping.html#cb128-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1995</span></span></code></pre></div>
<p>Wie diese Technik automatisiert auf eine Reihe von Seiten angewendet werden kann, wird zu einem späteren Zeitpunkt besprochen.</p>
</div>
<div id="aufgaben-6" class="section level2" number="11.7">
<h2><span class="header-section-number">11.7</span> Aufgaben</h2>
<ol style="list-style-type: decimal">
<li>Lesen Sie die Anzahl der Wohnheimplätze aus.</li>
</ol>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="web-scraping.html#cb129-1" aria-hidden="true" tabindex="-1"></a>quelltext</span>
<span id="cb129-2"><a href="web-scraping.html#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="do">## {html_document}</span></span>
<span id="cb129-3"><a href="web-scraping.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;html lang=&quot;de&quot; dir=&quot;ltr&quot; class=&quot;no-js&quot;&gt;</span></span>
<span id="cb129-4"><a href="web-scraping.html#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content= ...</span></span>
<span id="cb129-5"><a href="web-scraping.html#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;body id=&quot;p187&quot; class=&quot;page-187 pagelevel-4 lang ...</span></span></code></pre></div>
<div class="sourceCode" id="cb130"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb130-1"><a href="web-scraping.html#cb130-1" aria-hidden="true" tabindex="-1"></a>quelltext <span class="sc">%&gt;%</span></span>
<span id="cb130-2"><a href="web-scraping.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div#c599&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb130-3"><a href="web-scraping.html#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div.frame-inner&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb130-4"><a href="web-scraping.html#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;p&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb130-5"><a href="web-scraping.html#cb130-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb130-6"><a href="web-scraping.html#cb130-6" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb130-7"><a href="web-scraping.html#cb130-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]+&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb130-8"><a href="web-scraping.html#cb130-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>() <span class="ot">-&gt;</span> anzahl_plaetze</span>
<span id="cb130-9"><a href="web-scraping.html#cb130-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-10"><a href="web-scraping.html#cb130-10" aria-hidden="true" tabindex="-1"></a>anzahl_plaetze</span>
<span id="cb130-11"><a href="web-scraping.html#cb130-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 25</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Lesen Sie Baujahr und Anzahl der Wohnheimplätze von einem anderen Wohnheim aus. Was muss angepasst werden?</li>
</ol>
<div class="sourceCode" id="cb131"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb131-1"><a href="web-scraping.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># z.B.: https://www.studentenwerkfrankfurt.de/wohnen/wohnheime/wiesbaden/max-kade-haus-adolfsallee-49-53</span></span>
<span id="cb131-2"><a href="web-scraping.html#cb131-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-3"><a href="web-scraping.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;https://www.studentenwerkfrankfurt.de/wohnen/wohnheime/wiesbaden/max-kade-haus-adolfsallee-49-53&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb131-4"><a href="web-scraping.html#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="ot">-&gt;</span> quelltext_wi</span>
<span id="cb131-5"><a href="web-scraping.html#cb131-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-6"><a href="web-scraping.html#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Baujahr nicht vorhanden!</span></span>
<span id="cb131-7"><a href="web-scraping.html#cb131-7" aria-hidden="true" tabindex="-1"></a>baujahr_wi <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb131-8"><a href="web-scraping.html#cb131-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-9"><a href="web-scraping.html#cb131-9" aria-hidden="true" tabindex="-1"></a>quelltext_wi <span class="sc">%&gt;%</span></span>
<span id="cb131-10"><a href="web-scraping.html#cb131-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div#c1563&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-11"><a href="web-scraping.html#cb131-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Auf dieser Seite ist es eine andere div-ID!</span></span>
<span id="cb131-12"><a href="web-scraping.html#cb131-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Außerdem: Appartment = Platz? Scheint aber so zu sein...</span></span>
<span id="cb131-13"><a href="web-scraping.html#cb131-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div.frame-inner&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-14"><a href="web-scraping.html#cb131-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;p&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-15"><a href="web-scraping.html#cb131-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb131-16"><a href="web-scraping.html#cb131-16" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb131-17"><a href="web-scraping.html#cb131-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]+&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-18"><a href="web-scraping.html#cb131-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>() <span class="ot">-&gt;</span> anzahl_plaetze_wi</span>
<span id="cb131-19"><a href="web-scraping.html#cb131-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-20"><a href="web-scraping.html#cb131-20" aria-hidden="true" tabindex="-1"></a>anzahl_plaetze_wi</span>
<span id="cb131-21"><a href="web-scraping.html#cb131-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 87</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Ändern Sie das Script so, dass es auf beiden (allen) Wohnheimseiten funktioniert.</li>
</ol>
<div class="sourceCode" id="cb132"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb132-1"><a href="web-scraping.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hier kann (hoffentlich) auch jede andere Wohnheim-URL eingesetzt werden.</span></span>
<span id="cb132-2"><a href="web-scraping.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;https://www.studentenwerkfrankfurt.de/wohnen/wohnheime/frankfurt-am-main/kleine-seestrasse-11&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="web-scraping.html#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="ot">-&gt;</span> quelltext_x</span>
<span id="cb132-4"><a href="web-scraping.html#cb132-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-5"><a href="web-scraping.html#cb132-5" aria-hidden="true" tabindex="-1"></a>quelltext_x <span class="sc">%&gt;%</span></span>
<span id="cb132-6"><a href="web-scraping.html#cb132-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># So funktioniert es unabhänging von ID:</span></span>
<span id="cb132-7"><a href="web-scraping.html#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div.wohnheim-2 &gt; div:nth-child(2)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb132-8"><a href="web-scraping.html#cb132-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;p&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb132-9"><a href="web-scraping.html#cb132-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="ot">-&gt;</span> items</span>
<span id="cb132-10"><a href="web-scraping.html#cb132-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-11"><a href="web-scraping.html#cb132-11" aria-hidden="true" tabindex="-1"></a>items[<span class="dv">3</span>] <span class="sc">%&gt;%</span></span>
<span id="cb132-12"><a href="web-scraping.html#cb132-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]{4}&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb132-13"><a href="web-scraping.html#cb132-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>() <span class="ot">-&gt;</span> baujahr_x</span>
<span id="cb132-14"><a href="web-scraping.html#cb132-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-15"><a href="web-scraping.html#cb132-15" aria-hidden="true" tabindex="-1"></a>items[<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb132-16"><a href="web-scraping.html#cb132-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Funktioniert leider nicht bei der getrennten Angabe mehrerer Kategorien:</span></span>
<span id="cb132-17"><a href="web-scraping.html#cb132-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]+&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb132-18"><a href="web-scraping.html#cb132-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>() <span class="ot">-&gt;</span> anzahl_plaetze_x</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Lesen Sie die Adresse eines Wohnheims aus. Speichern Sie dabei Straße, Hausnummer, Postleitzahl und Ort getrennt.</li>
</ol>
<div class="sourceCode" id="cb133"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb133-1"><a href="web-scraping.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wie in Aufgabe 5 ersichtlich lassen sich die beiden Adresszeilen eigentlich</span></span>
<span id="cb133-2"><a href="web-scraping.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co"># recht einfach aus der Übersichtsseite auslesen.</span></span>
<span id="cb133-3"><a href="web-scraping.html#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="web-scraping.html#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Eine Schwierigkeit beim Auslesen aus der Einzelseite liegt darin, dass die</span></span>
<span id="cb133-5"><a href="web-scraping.html#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Funktion html_text() den Zeilenumbruch &lt;br&gt; &quot;verschluckt&quot;. Die neueste Version</span></span>
<span id="cb133-6"><a href="web-scraping.html#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="co"># von rvest beinhaltet die Funktion html_text2(), die genau dieses Probem löst.</span></span>
<span id="cb133-7"><a href="web-scraping.html#cb133-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-8"><a href="web-scraping.html#cb133-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Die neue Version kann installiert werden mit:</span></span>
<span id="cb133-9"><a href="web-scraping.html#cb133-9" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb133-10"><a href="web-scraping.html#cb133-10" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;tidyverse/rvest&quot;)</span></span>
<span id="cb133-11"><a href="web-scraping.html#cb133-11" aria-hidden="true" tabindex="-1"></a><span class="co"># (Danach R neu starten)</span></span>
<span id="cb133-12"><a href="web-scraping.html#cb133-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-13"><a href="web-scraping.html#cb133-13" aria-hidden="true" tabindex="-1"></a>quelltext_x <span class="sc">%&gt;%</span></span>
<span id="cb133-14"><a href="web-scraping.html#cb133-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;div.wohnheim-2 &gt; div:nth-child(2)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb133-15"><a href="web-scraping.html#cb133-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;p&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb133-16"><a href="web-scraping.html#cb133-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text2</span>() <span class="sc">%&gt;%</span></span>
<span id="cb133-17"><a href="web-scraping.html#cb133-17" aria-hidden="true" tabindex="-1"></a>  .[<span class="dv">1</span>] <span class="sc">%&gt;%</span></span>
<span id="cb133-18"><a href="web-scraping.html#cb133-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">trimws</span>() <span class="sc">%&gt;%</span></span>
<span id="cb133-19"><a href="web-scraping.html#cb133-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb133-20"><a href="web-scraping.html#cb133-20" aria-hidden="true" tabindex="-1"></a>  .[[<span class="dv">1</span>]] <span class="ot">-&gt;</span> adresse</span>
<span id="cb133-21"><a href="web-scraping.html#cb133-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-22"><a href="web-scraping.html#cb133-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Die Hausnummer sind die Zahlen am Ende der ersten Zeile:</span></span>
<span id="cb133-23"><a href="web-scraping.html#cb133-23" aria-hidden="true" tabindex="-1"></a>adresse[<span class="dv">1</span>] <span class="sc">%&gt;%</span></span>
<span id="cb133-24"><a href="web-scraping.html#cb133-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;[-0-9]+$&quot;</span>) <span class="ot">-&gt;</span> hausnummer <span class="co"># Funktioniert aber nicht bei 1b u.ä...</span></span>
<span id="cb133-25"><a href="web-scraping.html#cb133-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-26"><a href="web-scraping.html#cb133-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Die Straße ist der Rest:</span></span>
<span id="cb133-27"><a href="web-scraping.html#cb133-27" aria-hidden="true" tabindex="-1"></a>adresse[<span class="dv">1</span>] <span class="sc">%&gt;%</span></span>
<span id="cb133-28"><a href="web-scraping.html#cb133-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_remove</span>(<span class="st">&quot; [0-9]+$&quot;</span>) <span class="ot">-&gt;</span> strasse</span>
<span id="cb133-29"><a href="web-scraping.html#cb133-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-30"><a href="web-scraping.html#cb133-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Die PLZ sind die 5 Zahlen am Anfang der zweiten Zeile:</span></span>
<span id="cb133-31"><a href="web-scraping.html#cb133-31" aria-hidden="true" tabindex="-1"></a>adresse[<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb133-32"><a href="web-scraping.html#cb133-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&quot;^[0-9]{5}&quot;</span>) <span class="ot">-&gt;</span> plz</span>
<span id="cb133-33"><a href="web-scraping.html#cb133-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-34"><a href="web-scraping.html#cb133-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Der Ort ist der Rest:</span></span>
<span id="cb133-35"><a href="web-scraping.html#cb133-35" aria-hidden="true" tabindex="-1"></a>adresse[<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb133-36"><a href="web-scraping.html#cb133-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_remove</span>(<span class="st">&quot;^[0-9]{5} &quot;</span>) <span class="ot">-&gt;</span> ort</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Sammeln Sie eine Liste aller Wohnheime mit Link.</li>
</ol>
<div class="sourceCode" id="cb134"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb134-1"><a href="web-scraping.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;https://www.studentenwerkfrankfurt.de/wohnen/wohnheime&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb134-2"><a href="web-scraping.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">%&gt;%</span></span>
<span id="cb134-3"><a href="web-scraping.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">&quot;div.thumbnail&quot;</span>) <span class="ot">-&gt;</span> items</span>
<span id="cb134-4"><a href="web-scraping.html#cb134-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-5"><a href="web-scraping.html#cb134-5" aria-hidden="true" tabindex="-1"></a>items <span class="sc">%&gt;%</span></span>
<span id="cb134-6"><a href="web-scraping.html#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;a&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb134-7"><a href="web-scraping.html#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="ot">-&gt;</span> links</span>
<span id="cb134-8"><a href="web-scraping.html#cb134-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-9"><a href="web-scraping.html#cb134-9" aria-hidden="true" tabindex="-1"></a>items <span class="sc">%&gt;%</span></span>
<span id="cb134-10"><a href="web-scraping.html#cb134-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;h4&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb134-11"><a href="web-scraping.html#cb134-11" aria-hidden="true" tabindex="-1"></a>  html_text <span class="ot">-&gt;</span> strasse_nr</span>
<span id="cb134-12"><a href="web-scraping.html#cb134-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-13"><a href="web-scraping.html#cb134-13" aria-hidden="true" tabindex="-1"></a>items <span class="sc">%&gt;%</span></span>
<span id="cb134-14"><a href="web-scraping.html#cb134-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">&quot;p&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb134-15"><a href="web-scraping.html#cb134-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="ot">-&gt;</span> plz_ort</span>
<span id="cb134-16"><a href="web-scraping.html#cb134-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-17"><a href="web-scraping.html#cb134-17" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(links, strasse_nr, plz_ort) <span class="ot">-&gt;</span> index</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Sammeln Sie einen Datensatz (tibble) aller <q>Nutzungsentgelte</q> mit Wohnheim, Baujahr, Anzahl Wohneinheiten und Adresse. Stellen Sie sich vor, es handelte sich um Tausende Wohnheime – vermeiden Sie also Copy-Paste-Strategien.</li>
</ol>
<div class="sourceCode" id="cb135"><pre class="sourceCode r solution"><code class="sourceCode r"><span id="cb135-1"><a href="web-scraping.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hierfür gibt es einige Strategien. Meine präferierte Variante erfordert</span></span>
<span id="cb135-2"><a href="web-scraping.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co"># zunächst eine eigene Funktion, die eine URL nimmt und die gewünschten</span></span>
<span id="cb135-3"><a href="web-scraping.html#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Informationen ausgibt:</span></span>
<span id="cb135-4"><a href="web-scraping.html#cb135-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-5"><a href="web-scraping.html#cb135-5" aria-hidden="true" tabindex="-1"></a>scrape <span class="ot">&lt;-</span> <span class="cf">function</span>(url) {</span>
<span id="cb135-6"><a href="web-scraping.html#cb135-6" aria-hidden="true" tabindex="-1"></a>  url <span class="sc">%&gt;%</span></span>
<span id="cb135-7"><a href="web-scraping.html#cb135-7" aria-hidden="true" tabindex="-1"></a>    read_html <span class="ot">-&gt;</span> quelltext</span>
<span id="cb135-8"><a href="web-scraping.html#cb135-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-9"><a href="web-scraping.html#cb135-9" aria-hidden="true" tabindex="-1"></a>  quelltext <span class="sc">%&gt;%</span></span>
<span id="cb135-10"><a href="web-scraping.html#cb135-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb135-11"><a href="web-scraping.html#cb135-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">last</span>() <span class="sc">%&gt;%</span></span>
<span id="cb135-12"><a href="web-scraping.html#cb135-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Die Größe soll immer ein String sein, weil es sonst später Probeme gibt:</span></span>
<span id="cb135-13"><a href="web-scraping.html#cb135-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Größe m²</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.character</span>(<span class="st">`</span><span class="at">Größe m²</span><span class="st">`</span>)) <span class="ot">-&gt;</span> Nutzungsentgelte</span>
<span id="cb135-14"><a href="web-scraping.html#cb135-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-15"><a href="web-scraping.html#cb135-15" aria-hidden="true" tabindex="-1"></a>  quelltext <span class="sc">%&gt;%</span></span>
<span id="cb135-16"><a href="web-scraping.html#cb135-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_node</span>(<span class="st">&quot;div.wohnheim-2 &gt; div:nth-child(2)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb135-17"><a href="web-scraping.html#cb135-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">&quot;p&quot;</span>) <span class="ot">-&gt;</span> items</span>
<span id="cb135-18"><a href="web-scraping.html#cb135-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-19"><a href="web-scraping.html#cb135-19" aria-hidden="true" tabindex="-1"></a>  items[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb135-20"><a href="web-scraping.html#cb135-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text2</span>() <span class="sc">%&gt;%</span></span>
<span id="cb135-21"><a href="web-scraping.html#cb135-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">trimws</span>() <span class="sc">%&gt;%</span></span>
<span id="cb135-22"><a href="web-scraping.html#cb135-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_split</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb135-23"><a href="web-scraping.html#cb135-23" aria-hidden="true" tabindex="-1"></a>    .[[<span class="dv">1</span>]] <span class="ot">-&gt;</span> adresse</span>
<span id="cb135-24"><a href="web-scraping.html#cb135-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb135-25"><a href="web-scraping.html#cb135-25" aria-hidden="true" tabindex="-1"></a>  Nutzungsentgelte<span class="sc">$</span>strasse <span class="ot">&lt;-</span> adresse[<span class="dv">1</span>]</span>
<span id="cb135-26"><a href="web-scraping.html#cb135-26" aria-hidden="true" tabindex="-1"></a>  Nutzungsentgelte<span class="sc">$</span>ort <span class="ot">&lt;-</span> adresse[<span class="dv">2</span>]</span>
<span id="cb135-27"><a href="web-scraping.html#cb135-27" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb135-28"><a href="web-scraping.html#cb135-28" aria-hidden="true" tabindex="-1"></a>  items[<span class="dv">3</span>] <span class="sc">%&gt;%</span></span>
<span id="cb135-29"><a href="web-scraping.html#cb135-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb135-30"><a href="web-scraping.html#cb135-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]{4}&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb135-31"><a href="web-scraping.html#cb135-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.numeric</span>() <span class="ot">-&gt;</span> Nutzungsentgelte<span class="sc">$</span>baujahr</span>
<span id="cb135-32"><a href="web-scraping.html#cb135-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb135-33"><a href="web-scraping.html#cb135-33" aria-hidden="true" tabindex="-1"></a>  items[<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb135-34"><a href="web-scraping.html#cb135-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb135-35"><a href="web-scraping.html#cb135-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_extract</span>(<span class="st">&quot;[0-9]+&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb135-36"><a href="web-scraping.html#cb135-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.numeric</span>() <span class="ot">-&gt;</span> Nutzungsentgelte<span class="sc">$</span>anzahl_plaetze</span>
<span id="cb135-37"><a href="web-scraping.html#cb135-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb135-38"><a href="web-scraping.html#cb135-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(Nutzungsentgelte)</span>
<span id="cb135-39"><a href="web-scraping.html#cb135-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb135-40"><a href="web-scraping.html#cb135-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-41"><a href="web-scraping.html#cb135-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Dann kann ich die eigene Funktion &quot;scrape&quot; auf alle Links anwenden. Das</span></span>
<span id="cb135-42"><a href="web-scraping.html#cb135-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Ergebnis ist eine Liste von Tibbles. Die lässt sich schließlich noch</span></span>
<span id="cb135-43"><a href="web-scraping.html#cb135-43" aria-hidden="true" tabindex="-1"></a><span class="co"># kombinieren:</span></span>
<span id="cb135-44"><a href="web-scraping.html#cb135-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-45"><a href="web-scraping.html#cb135-45" aria-hidden="true" tabindex="-1"></a>index<span class="sc">$</span>links <span class="sc">%&gt;%</span></span>
<span id="cb135-46"><a href="web-scraping.html#cb135-46" aria-hidden="true" tabindex="-1"></a> <span class="fu">paste0</span>(<span class="st">&quot;https://www.studentenwerkfrankfurt.de&quot;</span>, .) <span class="sc">%&gt;%</span></span>
<span id="cb135-47"><a href="web-scraping.html#cb135-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(scrape) <span class="sc">%&gt;%</span></span>
<span id="cb135-48"><a href="web-scraping.html#cb135-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">do.call</span>(bind_rows, .) <span class="ot">-&gt;</span> liste</span>
<span id="cb135-49"><a href="web-scraping.html#cb135-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-50"><a href="web-scraping.html#cb135-50" aria-hidden="true" tabindex="-1"></a>liste</span>
<span id="cb135-51"><a href="web-scraping.html#cb135-51" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 133 x 8</span></span>
<span id="cb135-52"><a href="web-scraping.html#cb135-52" aria-hidden="true" tabindex="-1"></a><span class="do">##    Art   `Größe m²` Ausstattung `EUR*` strasse ort  </span></span>
<span id="cb135-53"><a href="web-scraping.html#cb135-53" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;</span></span>
<span id="cb135-54"><a href="web-scraping.html#cb135-54" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 &quot;Ein… &quot;16&quot;       &quot;unmöblier… &quot;250,… Beetho… 6032…</span></span>
<span id="cb135-55"><a href="web-scraping.html#cb135-55" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 &quot;Ein… &quot;18-20&quot;    &quot;unmöblier… &quot;311,… Beetho… 6032…</span></span>
<span id="cb135-56"><a href="web-scraping.html#cb135-56" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 &quot;Ein… &quot;24&quot;       &quot;barrieref… &quot;295,… Beetho… 6032…</span></span>
<span id="cb135-57"><a href="web-scraping.html#cb135-57" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 &quot;&quot;    &quot;&quot;         &quot;&quot;          &quot;&quot;     Beetho… 6032…</span></span>
<span id="cb135-58"><a href="web-scraping.html#cb135-58" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 &quot;Ein… &quot;9&quot;        &quot;möbliert,… &quot;207,… Bocken… 6032…</span></span>
<span id="cb135-59"><a href="web-scraping.html#cb135-59" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 &quot;Ein… &quot;15&quot;       &quot;unmöblier… &quot;236,… Bocken… 6032…</span></span>
<span id="cb135-60"><a href="web-scraping.html#cb135-60" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 &quot;Zwe… &quot;45&quot;       &quot;unmöblier… &quot;Bele… Bocken… 6032…</span></span>
<span id="cb135-61"><a href="web-scraping.html#cb135-61" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 &quot;Ein… &quot;11 - 17&quot;  &quot;unmöblier… &quot;256,… Fröbel… 6048…</span></span>
<span id="cb135-62"><a href="web-scraping.html#cb135-62" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 &quot;Ein… &quot;11&quot;       &quot;möbliert,… &quot;266,… Fröbel… 6048…</span></span>
<span id="cb135-63"><a href="web-scraping.html#cb135-63" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 &quot;Ein… &quot;23&quot;       &quot;unmöblier… &quot;315,… Fröbel… 6048…</span></span>
<span id="cb135-64"><a href="web-scraping.html#cb135-64" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 123 more rows, and 2 more variables:</span></span>
<span id="cb135-65"><a href="web-scraping.html#cb135-65" aria-hidden="true" tabindex="-1"></a><span class="do">## #   baujahr &lt;dbl&gt;, anzahl_plaetze &lt;dbl&gt;</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="html-tabellen.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="text-straube-2021.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ktiu/ds21/edit/master/11_web_scraping.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ktiu/ds21/blob/master/11_web_scraping.Rmd",
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
